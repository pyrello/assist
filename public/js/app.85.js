webpackJsonp([85],{IM3Y:function(t,e,s){var n=s("VU/8")(s("smZi"),s("vqbb"),!1,null,null,null);t.exports=n.exports},smZi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Dd8w"),a=s.n(n),i=s("NYxO");e.default={name:"note-list",props:["params","client_id","noteable_type","noteable_id"],data:function(){return{note:"",processing:!1}},computed:a()({},Object(i.c)("notes",["paginated","fetching"]),{notes:function(){return this.paginated}}),created:function(){this.params&&this.fetch(this.params)},watch:{params:function(){this.params&&this.fetch(this.params)}},methods:a()({},Object(i.b)("notes",["create","fetch","destroy"]),{addNote:function(){var t=this;this.processing=!0;var e={data:{advocate_id:this.authUser.id,client_id:this.client_id,content:this.note}};this.noteable_id&&this.noteable_type&&(e.data.noteable_type=this.noteable_type,e.data.noteable_id=this.noteable_id),this.create(e).then(function(){t.processing=!1,t.resetData(),t.fetch(t.params)})},confirmDelete:function(t){var e=this;confirm("Are you sure that you want to delete the note?")&&this.destroy({id:t}).then(function(){e.addMessage("Note has been deleted.")})},resetData:function(){this.note=""}})}},vqbb:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes box"},[s("div",{staticClass:"box-header"},[t._v("Notes "),t.fetching?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),t.fetching?[t._m(0)]:t.notes.length?[s("div",{staticClass:"box-body box-comments"},t._l(t.notes,function(e){return s("div",{staticClass:"box-comment"},[s("span",{staticClass:"username"},[t._v("\n                    "+t._s(e.advocate.first_name)+" "+t._s(e.advocate.last_name)+"\n                    "),s("span",{staticClass:"text-muted"},[t._v("\n                         on "+t._s(t._f("prettyDatetime")(e.created_at))+"\n                    ")])]),t._v(" "),s("div",{staticClass:"pull-right"},[s("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+e.client_id+"/notes/"+e.id+"/edit?from="+t.$route.path}},[s("i",{staticClass:"fas fa-edit fa-fw"}),t._v(" Edit")]),t._v(" "),t.authUser.is_admin?s("button",{staticClass:"btn btn-danger btn-xs",attrs:{href:"#delete"},on:{click:function(s){s.preventDefault(),t.confirmDelete(e.id)}}},[t._v("Delete")]):t._e()],1),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.$options.filters.markdown(e.content))}})])}))]:t._e(),t._v(" "),t.client_id&&t.noteable_type&&t.noteable_id?s("div",{staticClass:"box-footer"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.addNote(e)}}},[s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"form-control input-sm",attrs:{placeholder:"Add a note"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})]),t._v(" "),s("button",{staticClass:"btn btn-success btn-sm",attrs:{disabled:t.processing}},[t._v("Add note"),t.processing?[s("i",{staticClass:"fa fa-refresh fa-spin"})]:t._e()],2)])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-body"},[e("div",{staticClass:"lead"},[this._v("Loading notes")])])}]}}});