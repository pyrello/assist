webpackJsonp([69],{Vs7S:function(t,e,a){var s=a("VU/8")(a("Ycjn"),a("nMOQ"),!1,null,null,null);t.exports=s.exports},Ycjn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),r=a.n(s),n=a("PJh5"),i=a.n(n),o=a("NYxO");e.default={data:function(){return{generating:!0,range:"Last year",start_date:null,end_date:null}},computed:r()({},Object(o.c)("profiles",["byId","fetching"]),{current:function(){return this.byId(this.$route.params.id)},downloadPath:function(){var t="/reports/"+this.current.id+"/download",e="";return this.start_date&&(e+="start_date="+this.start_date),this.end_date&&(""!==e&&(e+="&"),e+="end_date="+this.end_date),""!==e&&(t+="?"+e),console.log(t),t}}),created:function(){this.init()},watch:{$route:"init"},methods:r()({},Object(o.b)("profiles",["fetch","setCurrent"]),{init:function(){this.setDates(this.range);var t={id:this.$route.params.id,params:{start_date:this.start_date,end_date:this.end_date}};this.fetch(t)},getDatesFromLabel:function(t){var e=i()(),a=i()();switch(t){case"This month":e=e.startOf("month");break;case"This quarter":e=e.startOf("quarter");break;case"This year":e=e.startOf("year");break;case"Last month":e=e.subtract(1,"month").startOf("month"),a=a.subtract(1,"month").endOf("month");break;case"Last quarter":e=e.subtract(1,"quarter").startOf("quarter"),a=a.subtract(1,"quarter").endOf("quarter");break;case"Last year":e=e.subtract(1,"year").startOf("year"),a=a.subtract(1,"year").endOf("year")}return{start_date:e=e.format("YYYY-MM-DD"),end_date:a=a.format("YYYY-MM-DD")}},setDates:function(t){var e=this.getDatesFromLabel(t),a=e.start_date,s=e.end_date;this.start_date=a,this.end_date=s}})}},nMOQ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.current?a("div",[a("header",{staticClass:"content-header padded"},[a("div",{staticClass:"header-actions pull-right hidden-xs hidden-sm desktop"},[a("a",{staticClass:"btn btn-success btn",attrs:{href:t.downloadPath}},[a("i",{staticClass:"fa fa-download"}),t._v(" Download")])]),t._v(" "),t.current.label?a("h1",[t._v(t._s(t.current.label))]):t._e(),t._v(" "),a("div",{staticClass:"header-actions hidden-md hidden-lg mobile"},[a("a",{staticClass:"btn btn-success btn",attrs:{href:t.downloadPath}},[a("i",{staticClass:"fa fa-download"}),t._v(" Download")])])]),t._v(" "),a("div",{staticClass:"section"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("Date Range")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.range,expression:"range"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.range=e.target.multiple?a:a[0]},t.init]}},[a("option",[t._v("This month")]),t._v(" "),a("option",[t._v("This quarter")]),t._v(" "),a("option",[t._v("This year")]),t._v(" "),a("option",[t._v("Last month")]),t._v(" "),a("option",[t._v("Last quarter")]),t._v(" "),a("option",[t._v("Last year")]),t._v(" "),a("option",[t._v("Custom...")])])])])]),t._v(" "),"Custom..."===t.range?a("div",{staticClass:"well"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("Start")]),t._v(" "),a("input-date",{attrs:{label:"Start Date",id:"start_date",selected:t.start_date,config:{enableTime:!1}},on:{"update:selected":function(e){t.start_date=e}}})],1)]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("End")]),t._v(" "),a("input-date",{attrs:{label:"End Date",id:"end_date",selected:t.start_date,config:{enableTime:!1}},on:{"update:selected":function(e){t.start_date=e}}})],1)])])]):t._e(),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),"percent"===t.current.aggregation_type?a("th",[t._v("Completed")]):t._e(),t._v(" "),a("th",[t._v("Total")]),t._v(" "),"percent"===t.current.aggregation_type?a("th",[t._v("Percent")]):t._e()])]),t._v(" "),a("tbody",[t._l(t.current.report_data,function(e,s){return a("tr",[a("td",[t._v(t._s(e.label))]),t._v(" "),"percent"===t.current.aggregation_type?a("td",{staticClass:"fit-content"},[t._v(t._s(e.partial))]):t._e(),t._v(" "),a("td",{staticClass:"fit-content"},[t._v(t._s(e.total))]),t._v(" "),"percent"===t.current.aggregation_type?a("td",{staticClass:"fit-content"},[t._v(t._s(Math.round(e.percent))+"%")]):t._e()])}),t._v(" "),a("tr",{staticClass:"report-total-row"},[a("th",[t._v("Total")]),t._v(" "),"percent"===t.current.aggregation_type?a("th"):t._e(),t._v(" "),a("th",[t._v(t._s(t.current.total))]),t._v(" "),"percent"===t.current.aggregation_type?a("th",[t._v("100%")]):t._e()])],2)])])]):a("div",{staticClass:"lead section"},[a("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" Your report is being generated. Please allow some time for the process to complete.\n    ")]),t._v(" "),a("pre",[t._v(t._s(t.current))])])},staticRenderFns:[]}}});