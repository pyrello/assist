webpackJsonp([62],{"74Z1":function(t,e,i){var n=i("VU/8")(i("cwHg"),i("7l1p"),!1,null,null,null);t.exports=n.exports},"7l1p":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.fetching?i("div",{staticClass:"lead"},[i("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" Loading data\n    ")]):!t.fetching&&t.incidents.length?i("div",[i("grid",{attrs:{fields:t.fields,data:t.incidents,fetching:t.fetching,meta:t.meta},scopedSlots:t._u([{key:"type.name",fn:function(e){return[t.client?i("router-link",{attrs:{to:"/incidents/"+e.item.id}},[t._v(t._s(e.item.type.name))]):t._e()]}},{key:"date",fn:function(e){return[t._v("\n                "+t._s(t._f("prettyDate")(e.item.date))+"\n            ")]}},{key:"actions",fn:function(e){return[i("div",{staticClass:"table-button-container"},[t.client?i("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/incidents/"+e.item.id+"/edit"}},[i("i",{staticClass:"fa fa-edit"}),t._v(" Edit")]):t._e(),t._v(" "),t.authUser.is_admin?i("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(i){t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"fa fa-remove"}),t._v(" Delete")]):t._e(),t._v("  \n                ")],1)]}}])})],1):t.client?i("div",{staticClass:"lead"},[i("i",{staticClass:"fa fa-info-circle"}),t._v(" An incident is required to start adding activities and outcomes. "),i("router-link",{attrs:{to:"/clients/"+t.client.id+"/incidents/add"}},[i("i",{staticClass:"fas fa-exclamation-triangle"}),t._v(" Add an incident")]),t._v(" to get started.\n    ")],1):t._e()])},staticRenderFns:[]}},UmUL:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("bOdI"),c=i.n(s),r=i("Zrlr"),o=i.n(r),d=i("NYxO"),u=i("OQde"),l=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},f=i("TFAV");e.a=function t(e){var i,n,s,r=e.name,h=e.storeName,m=e.model,p=void 0===m?f.a:m;o()(this,t),this.modelMixinOptions={name:r,storeName:h,model:p};var _=this;this.data=function(){var t;return t={},c()(t,_.modelMixinOptions.name,new _.modelMixinOptions.model),c()(t,"params",c()({},_.modelMixinOptions.name+"_id",null)),t},this.computed=a()({},Object(d.c)(h,(i={},c()(i,r+"ById","byId"),c()(i,"route"+l(r),"byRoute"),c()(i,"fetching"+l(r),"fetching"),i)),c()({},r+"Data",function(){return this["fetching"+l(r)],this["route"+l(r)]})),this.created=function(){this["set"+l(r)+"Id"]()},this.watch=(n={},c()(n,r+"Data",function(){this["reset"+_.modelMixinOptions.name](),this[_.modelMixinOptions.name+"Data"]&&this[""+_.modelMixinOptions.name].assign(this[_.modelMixinOptions.name+"Data"])}),c()(n,"this.$route.params."+r+"_id",function(){this["set"+l(r)+"Id"]()}),n),this.methods=a()({},Object(d.b)(h,c()({},"fetch"+l(r),"fetch")),(s={},c()(s,"set"+l(r)+"Id",function(t){t=t?Number(t):this.$route.params[r+"_id"]?Number(this.$route.params[r+"_id"]):null,Vue.set(this.params,r+"_id",t)}),c()(s,r+"IdExists",function(){return Object(u.f)(this.params[r+"_id"])&&null!==this.params[r+"_id"]}),c()(s,"fetchRoute"+l(r),function(){var t=this,e=Number(this.$route.params[r+"_id"]);return!!e&&this["fetch"+l(r)]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+l(r)+"Fetched"](),t["current"+l(r)+"Fetched"](),e}).catch(function(t){console.error(t)})}),c()(s,"fetchCurrent"+l(r),function(){return this["fetchRoute"+l(r)]()}),c()(s,"current"+l(r)+"Fetched",function(){}),c()(s,"route"+l(r)+"Fetched",function(){}),c()(s,r+"Fetched",function(){}),c()(s,"reset",function(){this.resetData()}),c()(s,"resetData",function(){this["reset"+r](),this.params[r+"_id"]=null}),c()(s,"reset"+r,function(){this[r]=new p}),s))}},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var n,a=i("C4MV"),s=(n=a)&&n.__esModule?n:{default:n};e.default=function(t,e,i){return e in t?(0,s.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},cwHg:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("bOdI"),a=i.n(n),s=i("Dd8w"),c=i.n(s),r=i("NYxO"),o=i("fQ0y");e.default={name:"incident-index",mixins:[o.a],data:function(){return{fields:[{name:"type.name",title:"Type"},"date",{name:"client_age",title:"Age"},{name:"advocate.name",title:"Advocate",template:"{{ advocate.first_name }} {{ advocate.last_name }}",sortField:"advocate.last_name"},"state","city",{name:"actions",dataClass:"fit-content",titleClass:"fit-content",sortable:!1}]}},computed:c()({},Object(r.c)("incidents",{byId:"byId",fetching:"fetching",incidents:"paginated",meta:"meta"})),created:function(){this.init(this.$route.query)},beforeRouteUpdate:function(t,e,i){this.init(t.query),i()},watch:a()({},"params.client_id",function(){this.init(this.$route.query)}),methods:c()({},Object(r.b)("incidents",["destroy","fetch","setQuery"]),{confirmDelete:function(t){var e=this;if(confirm("Are you sure that you want to delete this incident?")){var i=this.byId(t).client_id;this.destroy({id:t}).then(function(){e.addMessage("This incident has been deleted."),e.fetchClient({id:i})})}},init:function(t){var e={params:c()({},this.params,{page:t&&t.page||1})};this.fetch(e)}})}},fQ0y:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("b+22"),c=i("UmUL");e.a=a()({},new c.a({name:"client",storeName:"clients",model:s.a}))}});