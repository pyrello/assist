webpackJsonp([33,3,51,53],{"06Lg":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var s=i("woOf"),n=i.n(s),a=i("OQde");t.default={name:"selectize",data:function(){return{fetched:!0,localConfig:this.defaultConfig(),updating:!1,allCount:0,allCached:"",previousValue:null}},props:{all:{type:Array|Object},clear:{type:Boolean,default:!1},config:Object,disabled:{default:!1,type:Boolean},id:String,multiple:{default:!1,type:Boolean},labelField:{default:"name",type:String},placeholder:{default:"Select the item...",type:String},template:String,value:Array|String,identity:String,valueField:{default:"value",type:String},valueType:{default:"string",type:String}},computed:{selectize:function(){return this.$el&&this.$el.selectize||null}},mounted:function(){n()(this.localConfig,this.config),this.init()},updated:function(){n()(this.localConfig,this.config),this.init()},destroyed:function(){this.$el.selectize.destroy()},watch:{all:function(){var e=this;this.updating=!0,this.selectize&&(this.selectize.disable(),this.clearOptions(),this.selectize.load(function(t){e.all.length>0?(e.selectize.enable(),t(e.all),e.selectize.setValue(e.value,!0)):t(),e.updating=!1}))},disabled:function(e){this.selectize&&(e?this.selectize.disable():this.selectize.enable())},clear:function(e){e&&this.clearOptions(),this.$emit("clear")},value:function(e){this.previousValue=e,e||this.clearOptions(),this.selectize&&this.selectize.setValue(e,!0)}},methods:{defaultConfig:function(){var e=this,t=this;return{valueField:this.valueField,labelField:this.labelField,searchField:this.labelField,onInitialize:function(){e.setValue()},onChange:function(t){e.select(t)},render:{option:function(e,i){return'<div class="option">'+i(t.itemLabel(e))+"</div>"},item:function(e,i){return'<div class="item">'+i(t.itemLabel(e))+"</div>"}}}},clearOptions:function(){this.selectize&&(this.selectize.loadedSearches={},this.selectize.userOptions={},this.selectize.renderCache={},this.selectize.options=this.selectize.sifter.items={},this.selectize.lastQuery=null,this.selectize.trigger("option_clear"),this.selectize.clear(!0))},init:function(){this.selectEl=this.$refs.select,e(this.$el).selectize(this.localConfig),this.setValue()},itemLabel:function(e){return Object(a.f)(this.template)?(e.first_name&&!Object(a.f)(e.first_name)&&e.last_name&&!Object(a.f)(e.last_name)&&console.warn("first name and last name are undefined",e),Object(a.k)(this.template,e)):"string"==typeof e?e:e[this.labelField]},itemValue:function(e){return"string"==typeof e?e:Object(a.i)(e,this.valueField)?e[this.valueField]:e.id},select:function(e){"number"===this.valueType&&0!==e&&"0"!==e&&(e=Array.isArray(e)?e.map(function(e){return Number(e)}):Number(e)),this.$emit("input",e)},setValue:function(){this.$el.selectize.setValue(this.value,!0)}}}}.call(t,i("7t+N"))},EUaC:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("select",{ref:"select",staticClass:"form-control",attrs:{id:e.id,placeholder:e.placeholder,multiple:e.multiple},domProps:{value:e.value},on:{"update:value":function(t){e.value=t}}},[e._t("default",e._l(e.all,function(t){return i("option",{domProps:{value:e.itemValue(t),textContent:e._s(e.itemLabel(t))}})}))],2)},staticRenderFns:[]}},HcnS:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",{staticClass:"content-header"},[i("h1",[e._v("Clients"),e.fetching?i("small",[i("i",{staticClass:"fas fa-spinner fa-spin"})]):e._e()])]),e._v(" "),i("div",{staticClass:"section"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.process(t)}}},[i("div",{staticClass:"row",attrs:{id:"client-search-basic"}},[i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"control-label hidden"},[e._v("Search")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter one or more search terms..."},domProps:{value:e.q},on:{input:function(t){t.target.composing||(e.q=t.target.value)}}})])]),e._v(" "),e.advancedSearch?e._e():i("div",{staticClass:"col-md-8"},[e._m(0),e._v(" "),i("a",{staticClass:"btn btn-link",attrs:{href:"#advanced-search"},on:{click:function(t){t.preventDefault(),e.advancedSearch=!0}}},[e._v("More options "),i("i",{staticClass:"fas fa-caret-down"})]),e._v(" "),e.fetching?i("span",[i("i",{staticClass:"fas fa-spinner fa-pulse"}),e._v(" Searching...")]):e._e()]),e._v(" "),e._m(1)]),e._v(" "),e.advancedSearch?i("div",{staticClass:"row",attrs:{id:"client-search-advanced"}},[i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Intake Date")]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6"},[i("input-date",{attrs:{end:"now"},model:{value:e.filters.intake_date,callback:function(t){e.$set(e.filters,"intake_date",t)},expression:"filters.intake_date"}})],1)])]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",[e._v("Last Activity Date")]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6"},[i("input-date",{attrs:{end:"now"},model:{value:e.filters.activity_date,callback:function(t){e.$set(e.filters,"activity_date",t)},expression:"filters.activity_date"}})],1)])]),e._v(" "),e._m(2),i("button",{staticClass:"btn btn-link btn-lg",attrs:{type:"reset"},on:{click:function(t){t.stopPropagation(),e.reset()}}},[e._v("Reset")]),e._v(" "),e.fetching?i("span",[i("i",{staticClass:"fas fa-spinner fa-pulse"}),e._v(" Searching...")]):e._e()])]):e._e()]),e._v(" "),e.showResults?i("div",{staticClass:"results"},[i("grid",{attrs:{fields:e.fields,data:e.all,meta:e.meta,initialSortKey:"last_name"},scopedSlots:e._u([{key:"first_name",fn:function(t){return[i("router-link",{attrs:{to:"/clients/"+t.item.id}},[e._v(e._s(t.item.first_name))])]}},{key:"last_name",fn:function(t){return[i("router-link",{attrs:{to:"/clients/"+t.item.id}},[e._v(e._s(t.item.last_name))])]}},{key:"phone",fn:function(t){return[t.item.primary_phone_number&&t.item.primary_phone_number.number?[e._v(e._s(e._f("phone")(t.item.primary_phone_number.number)))]:[e._v(" - ")]]}},{key:"actions",fn:function(t){return[i("div",{staticClass:"table-button-container"},[i("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+t.item.id+"/edit"}},[i("i",{staticClass:"fa fa-edit"}),e._v(" Edit")]),e._v(" "),e.authUser.is_admin?i("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(i){e.confirmDelete(t.item.id)}}},[i("i",{staticClass:"fa fa-remove"}),e._v(" Delete")]):e._e(),e._v("  \n                    ")],1)]}}])})],1):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-success"},[t("i",{staticClass:"fas fa-search"}),this._v(" Search Clients")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-12"},[t("p",{staticClass:"help-block"},[t("i",{staticClass:"fas fa-question-circle"}),this._v(" "),t("strong",[this._v("Tip:")]),this._v(" Search by first name and/or last name, id, or phone number. If searching by phone number, just type the numbers "),t("em",[this._v("without any formatting")]),this._v(".")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-success btn-lg"},[t("i",{staticClass:"fas fa-search"}),this._v(" Search Clients")])}]}},JC7k:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Dd8w"),n=i.n(s),a=i("NYxO"),l=(i("OQde"),i("qvTH")),r=i.n(l);t.default={name:"select-ethnicity",components:{Selectize:r.a},props:{value:Array},computed:n()({},Object(a.c)("ethnicity",["all"])),methods:{select:function(e){Array.isArray(e)&&(e=e.map(function(e){return Number(e)})),this.$emit("input",e)}}}},Qu4w:function(e,t,i){var s=i("VU/8")(i("ZG4e"),i("gTi0"),!1,null,null,null);e.exports=s.exports},ZG4e:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Dd8w"),n=i.n(s),a=i("NYxO"),l=i("qvTH"),r=i.n(l);t.default={components:{Selectize:r.a},props:["id","value"],computed:n()({},Object(a.c)("genders",["all"])),methods:{select:function(e){this.$emit("input",e)}}}},aUmT:function(e,t,i){var s=i("VU/8")(i("JC7k"),i("kZjy"),!1,null,null,null);e.exports=s.exports},bOdI:function(e,t,i){"use strict";t.__esModule=!0;var s,n=i("C4MV"),a=(s=n)&&s.__esModule?s:{default:s};t.default=function(e,t,i){return t in e?(0,a.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},gTi0:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("selectize",{attrs:{all:e.all,value:e.value,placeholder:"Select the gender...",id:e.id,valueField:"name"},on:{"update:value":function(t){e.value=t},input:e.select}},e._l(e.all,function(t){return i("option",[e._v(e._s(t.name))])}))},staticRenderFns:[]}},h99O:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("bOdI"),n=i.n(s),a=i("Dd8w"),l=i.n(a),r=i("NYxO"),c=i("aUmT"),o=i.n(c),u=i("Qu4w"),d=i.n(u);t.default={name:"client-index",components:{SelectEthnicity:o.a,SelectGender:d.a},data:function(){return{fields:[{name:"first_name",title:"First Name"},{name:"last_name",title:"Last Name"},{name:"id",title:"ID"},{name:"phone",title:"Phone"},{name:"actions",titleClass:"fit-content",dataClass:"fit-content",sortable:!1}],q:"",filters:{intake_date:null,last_activity_date:null},advancedSearch:!1,showResults:!1}},computed:l()({},Object(r.c)("clients",{byId:"byId",fetching:"fetching",meta:"meta",paginated:"paginated"}),{all:function(){return this.paginated}}),created:function(){this.setCurrentFilter({signature:"{}"}),this.$route.query.page&&this.process()},beforeRouteLeave:function(e,t,i){this.q="",this.setCurrentFilter({signature:"{}"}),i()},watch:n()({},"$route.query.page",function(){this.process()}),methods:l()({},Object(r.b)("clients",["destroy","fetch","setCurrentFilter"]),{confirmDelete:function(e){var t=this,i=this.byId(e).full_name;confirm("Are you sure that you want to delete the client, "+i+"?")&&this.destroy({id:e}).then(function(e){t.addMessage(i+" has been deleted."),t.$router.push("/clients")}).catch(function(e){return e})},process:function(){this.showResults=!0;var e=this.$route&&this.$route.query&&this.$route.query.page||1,t={params:{page:Number(e)}};this.q&&(t.params.q=this.q),this.filters.intake_date&&(t.params.intake_date=this.filters.intake_date),this.filters.activity_date&&(t.params.activity_date=this.filters.activity_date),this.fetch(t)},reset:function(){this.advancedSearch=!1,this.showResults=!1,this.resetData()},resetData:function(){this.q="",this.filters={intake_date:null,last_activity_date:null}}})}},kZjy:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("selectize",{attrs:{all:e.all,value:e.value,id:"select-ethnicity",placeholder:"Select ethnicity...",multiple:!0,identity:"ethnicity",valueField:"id",valueType:"number"},on:{"update:value":function(t){e.value=t},input:e.select}},e._l(e.all,function(t){return i("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])}))},staticRenderFns:[]}},pbZ0:function(e,t,i){var s=i("VU/8")(i("h99O"),i("HcnS"),!1,null,null,null);e.exports=s.exports},qvTH:function(e,t,i){var s=i("VU/8")(i("06Lg"),i("EUaC"),!1,null,null,null);e.exports=s.exports}});