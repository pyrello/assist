webpackJsonp([64],{"5eLW":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("NYxO"),r=i("fQ0y");e.default={name:"clients",mixins:[r.a],data:function(){return{fields:["relationship",{name:"first_name",title:"First Name"},{name:"last_name",title:"Last Name"},{name:"actions",titleClass:"fit-content",dataClass:"fit-content",sortable:!1}]}},computed:s()({},Object(a.c)("abuseRelationships",{byId:"byId",all:"paginated",fetching:"fetching",meta:"meta"})),created:function(){this.init()},watch:{$route:"init"},methods:s()({},Object(a.b)("abuseRelationships",{fetch:"fetch",removeRelationship:"destroy"}),{confirmDelete:function(t){var e=this,i=this.byId(t).abuser.full_name;confirm("Are you sure that you want to remove the abuse relationship between, "+i+" and "+this.client.full_name+"? If this abuser is not attached to any other clients, their record will be deleted.")&&this.removeRelationship({id:t}).then(function(){e.addMessage("This abuse relationship has been removed"),e.$router.push("/clients/"+e.client.id+"/abuse")})},init:function(t){var e={params:s()({},this.$route.params)};this.fetch(e)}})}},UmUL:function(t,e,i){"use strict";var n=i("Dd8w"),s=i.n(n),a=i("bOdI"),r=i.n(a),o=i("Zrlr"),u=i.n(o),c=i("NYxO"),l=i("OQde"),d=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},m=i("TFAV");e.a=function t(e){var i,n,a,o=e.name,f=e.storeName,h=e.model,b=void 0===h?m.a:h;u()(this,t),this.modelMixinOptions={name:o,storeName:f,model:b};var _=this;this.data=function(){var t;return t={},r()(t,_.modelMixinOptions.name,new _.modelMixinOptions.model),r()(t,"params",r()({},_.modelMixinOptions.name+"_id",null)),t},this.computed=s()({},Object(c.c)(f,(i={},r()(i,o+"ById","byId"),r()(i,"route"+d(o),"byRoute"),r()(i,"fetching"+d(o),"fetching"),i)),r()({},o+"Data",function(){return this["fetching"+d(o)],this["route"+d(o)]})),this.created=function(){this["set"+d(o)+"Id"]()},this.watch=(n={},r()(n,o+"Data",function(){this["reset"+_.modelMixinOptions.name](),this[_.modelMixinOptions.name+"Data"]&&this[""+_.modelMixinOptions.name].assign(this[_.modelMixinOptions.name+"Data"])}),r()(n,"this.$route.params."+o+"_id",function(){this["set"+d(o)+"Id"]()}),n),this.methods=s()({},Object(c.b)(f,r()({},"fetch"+d(o),"fetch")),(a={},r()(a,"set"+d(o)+"Id",function(t){t=t?Number(t):this.$route.params[o+"_id"]?Number(this.$route.params[o+"_id"]):null,Vue.set(this.params,o+"_id",t)}),r()(a,o+"IdExists",function(){return Object(l.f)(this.params[o+"_id"])&&null!==this.params[o+"_id"]}),r()(a,"fetchRoute"+d(o),function(){var t=this,e=Number(this.$route.params[o+"_id"]);return!!e&&this["fetch"+d(o)]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+d(o)+"Fetched"](),t["current"+d(o)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(a,"fetchCurrent"+d(o),function(){return this["fetchRoute"+d(o)]()}),r()(a,"current"+d(o)+"Fetched",function(){}),r()(a,"route"+d(o)+"Fetched",function(){}),r()(a,o+"Fetched",function(){}),r()(a,"reset",function(){this.resetData()}),r()(a,"resetData",function(){this["reset"+o](),this.params[o+"_id"]=null}),r()(a,"reset"+o,function(){this[o]=new b}),a))}},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var n,s=i("C4MV"),a=(n=s)&&n.__esModule?n:{default:n};e.default=function(t,e,i){return e in t?(0,a.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},fQ0y:function(t,e,i){"use strict";var n=i("Dd8w"),s=i.n(n),a=i("b+22"),r=i("UmUL");e.a=s()({},new r.a({name:"client",storeName:"clients",model:a.a}))},fxRi:function(t,e,i){var n=i("VU/8")(i("5eLW"),i("iOlV"),!1,null,null,null);t.exports=n.exports},iOlV:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("grid",{attrs:{fields:t.fields,data:t.all,fetching:t.fetching,meta:t.meta,initialSortKey:"last_name"},scopedSlots:t._u([{key:"relationship",fn:function(e){return[e.item.relationship?[t._v(t._s(e.item.relationship))]:[t._v("'-'")]]}},{key:"first_name",fn:function(e){return[null===e.item.abuser?[i("em",[t._v("Abuser deleted")])]:e.item.abuser&&e.item.abuser.first_name?[i("router-link",{attrs:{to:"/abusers/"+e.item.abuser_id}},[t._v(t._s(e.item.abuser.first_name))])]:[t._v("-")]]}},{key:"last_name",fn:function(e){return[e.item.abuser&&e.item.abuser.last_name?[i("router-link",{attrs:{to:"/abusers/"+e.item.abuser_id}},[t._v(t._s(e.item.abuser.last_name))])]:[t._v("-")]]}},{key:"actions",fn:function(e){return[i("div",{staticClass:"table-button-container"},[i("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+t.client.id+"/abuse/"+e.item.id+"/edit"}},[i("i",{staticClass:"fas fa-edit"}),t._v(" Edit")]),t._v(" "),t.authUser.is_admin?i("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(i){t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"fas fa-user-times"}),t._v(" Remove")]):t._e(),t._v("  \n            ")],1)]}}])})],1)},staticRenderFns:[]}}});