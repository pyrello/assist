webpackJsonp([43],{"8XZL":function(t,e,n){"use strict";var i=n("Zx67"),s=n.n(i),a=n("Zrlr"),r=n.n(a),o=n("zwoO"),l=n.n(o),u=n("Pf15"),c=n.n(u),d=function(){return{id:null,first_name:null,last_name:null,birth_date:null,gender:null,ethnicity_ids:[],eye_color:null,hair_color:null,hair_length:null,height:null,weight:null,identifying_features:null,vehicle:null}},h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(this,e),l()(this,(e.__proto__||s()(e)).call(this,d(),t))}return c()(e,t),e}(n("TFAV").a);e.a=h},FSJl:function(t,e,n){var i=n("VU/8")(n("wukA"),n("jAUx"),!1,null,null,null);t.exports=i.exports},P7Jg:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("8XZL"),r=n("UmUL");e.a=s()({},new r.a({name:"abuser",storeName:"abusers",model:a.a}))},UmUL:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("bOdI"),r=n.n(a),o=n("Zrlr"),l=n.n(o),u=n("NYxO"),c=n("OQde"),d=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},h=n("TFAV");e.a=function t(e){var n,i,a,o=e.name,m=e.storeName,f=e.model,_=void 0===f?h.a:f;l()(this,t),this.modelMixinOptions={name:o,storeName:m,model:_};var b=this;this.data=function(){var t;return t={},r()(t,b.modelMixinOptions.name,new b.modelMixinOptions.model),r()(t,"params",r()({},b.modelMixinOptions.name+"_id",null)),t},this.computed=s()({},Object(u.c)(m,(n={},r()(n,o+"ById","byId"),r()(n,"route"+d(o),"byRoute"),r()(n,"fetching"+d(o),"fetching"),n)),r()({},o+"Data",function(){return this["fetching"+d(o)],this["route"+d(o)]})),this.created=function(){this["set"+d(o)+"Id"]()},this.watch=(i={},r()(i,o+"Data",function(){this["reset"+b.modelMixinOptions.name](),this[b.modelMixinOptions.name+"Data"]&&this[""+b.modelMixinOptions.name].assign(this[b.modelMixinOptions.name+"Data"])}),r()(i,"this.$route.params."+o+"_id",function(){this["set"+d(o)+"Id"]()}),i),this.methods=s()({},Object(u.b)(m,r()({},"fetch"+d(o),"fetch")),(a={},r()(a,"set"+d(o)+"Id",function(t){t=t?Number(t):this.$route.params[o+"_id"]?Number(this.$route.params[o+"_id"]):null,Vue.set(this.params,o+"_id",t)}),r()(a,o+"IdExists",function(){return Object(c.f)(this.params[o+"_id"])&&null!==this.params[o+"_id"]}),r()(a,"fetchRoute"+d(o),function(){var t=this,e=Number(this.$route.params[o+"_id"]);return!!e&&this["fetch"+d(o)]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+d(o)+"Fetched"](),t["current"+d(o)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(a,"fetchCurrent"+d(o),function(){return this["fetchRoute"+d(o)]()}),r()(a,"current"+d(o)+"Fetched",function(){}),r()(a,"route"+d(o)+"Fetched",function(){}),r()(a,o+"Fetched",function(){}),r()(a,"reset",function(){this.resetData()}),r()(a,"resetData",function(){this["reset"+o](),this.params[o+"_id"]=null}),r()(a,"reset"+o,function(){this[o]=new _}),a))}},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var i,s=n("C4MV"),a=(i=s)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},jAUx:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("grid",{attrs:{fields:t.fields,data:t.all,fetching:t.fetching,meta:t.meta,initialSortKey:"last_name"},scopedSlots:t._u([{key:"relationship",fn:function(e){return[e.item.relationship?[n("router-link",{attrs:{to:"/clients/"+e.item.client_id+"/abuse/"+e.item.id}},[t._v(t._s(e.item.relationship))])]:[t._v("'-'")]]}},{key:"first_name",fn:function(e){return[null===e.item.client?[n("em",[t._v("Client deleted")])]:e.item.client&&e.item.client.first_name?[n("router-link",{attrs:{to:"/clients/"+e.item.client.id}},[t._v(t._s(e.item.client.first_name))])]:[t._v("-")]]}},{key:"last_name",fn:function(e){return[e.item.client&&e.item.client.last_name?[n("router-link",{attrs:{to:"/clients/"+e.item.client.id}},[t._v(t._s(e.item.client.last_name))])]:[t._v("-")]]}},{key:"actions",fn:function(e){return[n("div",{staticClass:"table-button-container"},[e.item.client&&e.item.client.id?n("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+e.item.client.id+"/abuse/"+e.item.id+"/edit"}},[n("i",{staticClass:"fas fa-edit"}),t._v(" Edit")]):t._e(),t._v(" "),t.authUser.is_admin?n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(n){t.confirmDelete(e.item.id)}}},[n("i",{staticClass:"fas fa-user-times"}),t._v(" Remove")]):t._e(),t._v("  \n            ")],1)]}}])})],1)},staticRenderFns:[]}},wukA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("P7Jg");e.default={name:"abuser-client-index",mixins:[r.a],data:function(){return{fields:["relationship",{name:"first_name",title:"First Name"},{name:"last_name",title:"Last Name"},{name:"actions",titleClass:"fit-content",dataClass:"fit-content",sortable:!1}]}},computed:s()({},Object(a.c)("abuseRelationships",{byId:"byId",all:"paginated",fetching:"fetching",meta:"meta"})),created:function(){this.init()},watch:{$route:"init"},methods:s()({},Object(a.b)("abuseRelationships",{fetch:"fetch",removeRelationship:"destroy"}),{confirmDelete:function(t){var e=this,n=this.byId(t).full_name;confirm("Are you sure that you want to remove the abuse relationship between, "+n+" and "+this.client.full_name+"? If this abuser is not not attached to any other clients, their record will be deleted.")&&this.removeRelationship({id:t}).then(function(){e.addMessage("This abuse relationship has been removed"),e.$router.push("/clients/"+e.client.id+"/abuse")})},init:function(){var t={params:s()({},this.$route.params)};this.fetch(t)}})}}});