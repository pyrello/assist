webpackJsonp([43,84],{"1LT8":function(t,e,n){var i=n("VU/8")(n("2KWr"),n("8og9"),!1,null,null,null);t.exports=i.exports},"2KWr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=n("Dd8w"),l=n.n(i),s=n("M4fF"),a=(n.n(s),n("71cn")),c=n.n(a);e.default={components:{DemographicOptions:c.a},data:function(){return{activeRange:0,includeAll:!0,include:[],subs:{},labels:{},showModal:!1,showOptionsIndex:-1}},methods:{allowSplit:function(t){return null!==t.min&&null!==t.max},blankRange:function(){return{min:null}},deleteRange:function(t){var e=this.ranges[t];this.ranges.splice(t,1),this.$set(this.ranges[t],"min",e.min)},rangeName:function(t){var e="";return null===t.min?"":(e+=t.min.toString(),t.hasOwnProperty("max")&&null!==t.max?e+=" - "+t.max.toString():e+="+",e)},setLabel:function(t,e){this.list.splice(t,1,this.initObject(this.list[t],e))},setNextRangeMin:function(t,e){this.$set(this.ranges[t+1],"min",Number(e)+1)},showSplitOptions:function(t){this.showOptionsIndex=t,this.showModal=!0},splitRange:function(e){var n=this,i=this.ranges[e],s=l()({},this.blankRange(),{max:null}),a=this.blankRange();s.min=i.min,i.hasOwnProperty("max")&&null!==i.max&&(a.max=i.max),this.ranges.splice(e,1,s),this.ranges.splice(e+1,0,a),this.$nextTick(function(){n.activeRange=e,t(n.$refs["range-max-"+e]).focus()})},toggleAll:function(){this.includeAll?this.$set(this,"include",this.services.map(function(t){return t.name})):this.$set(this,"include",[])},toggleInclude:function(t){console.log("toggling include"),"string"==typeof this.list[t]&&this.list.splice(t,1,this.initObject(this.list[t],"",!1))},convertToObject:function(t){"string"==typeof this.list[t]?this.list.splice(t,1,this.initObject(this.list[t])):console.error("Attempted to convert an object into an object")},initObject:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return console.log("creating object",t,e,n),{name:t,label:e,include:n}}},props:{label:{type:String,default:"Range"},type:String,list:Array},watch:{}}}.call(e,n("7t+N"))},"71cn":function(t,e,n){var i=n("VU/8")(n("r/2Y"),n("oUie"),!1,null,null,null);t.exports=i.exports},"8og9":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[t.label?n("label",{staticClass:"control-label",domProps:{textContent:t._s(t.label)}}):t._e(),t._v(" "),n("table",{staticClass:"table table-striped no-bottom-margin"},[n("thead",[n("tr",[n("th",{staticClass:"fit-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeAll,expression:"includeAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeAll)?t._i(t.includeAll,null)>-1:t.includeAll},on:{change:[function(e){var n=t.includeAll,i=e.target,l=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&(t.includeAll=n.concat([null])):s>-1&&(t.includeAll=n.slice(0,s).concat(n.slice(s+1)))}else t.includeAll=l},t.toggleAll]}})]),t._v(" "),n("th",[t._v("Label")]),t._v(" "),n("th",[t._v("Options")])])]),t._v(" "),n("tbody",[t._l(t.list,function(e,i){return["string"==typeof e?[n("tr",[n("td",{staticClass:"fit-content"},[n("input",{attrs:{type:"checkbox",id:"victim_types-include-"+e,checked:"checked"},on:{click:function(e){t.toggleInclude(i)}}})]),t._v(" "),n("td",{staticClass:"td-input"},[n("input",{staticClass:"form-control input-sm",attrs:{type:"text",placeholder:e},on:{input:function(e){t.setLabel(i,e.target.value)}}})]),t._v(" "),n("td",[n("a",{staticClass:"btn btn-rounded btn-primary btn-xs",attrs:{href:"#split-range"},on:{click:function(e){e.stopPropagation(),t.showSplitOptions(i)}}},[n("i",{staticClass:"fa fa-chevron-left"})])])])]:[n("tr",[n("td",{staticClass:"fit-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.list[i].include,expression:"list[index].include"}],attrs:{type:"checkbox",id:"victim_types-include-"+e},domProps:{value:e,checked:Array.isArray(t.list[i].include)?t._i(t.list[i].include,e)>-1:t.list[i].include},on:{change:function(n){var l=t.list[i].include,s=n.target,a=!!s.checked;if(Array.isArray(l)){var c=e,o=t._i(l,c);s.checked?o<0&&t.$set(t.list[i],"include",l.concat([c])):o>-1&&t.$set(t.list[i],"include",l.slice(0,o).concat(l.slice(o+1)))}else t.$set(t.list[i],"include",a)}}})]),t._v(" "),n("td",{staticClass:"td-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"item.label"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:e.name,disabled:!e.include},domProps:{value:e.label},on:{input:function(n){n.target.composing||t.$set(e,"label",n.target.value)}}})]),t._v(" "),n("td",[n("a",{staticClass:"btn btn-rounded btn-primary btn-xs",attrs:{href:"#split-range"},on:{click:function(e){e.stopPropagation(),t.showSplitOptions(i)}}},[n("i",{staticClass:"fa fa-chevron-left"})])])])]]})],2)]),t._v(" "),n("modal",{attrs:{show:t.showModal},on:{"update:show":function(e){t.showModal=e}}},[t.showOptionsIndex>=0?[n("header",[n("h1",[t._v("Select demographic to sub-divide by")])]),t._v(" "),n("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[n("demographic-options",{attrs:{label:"Base demographic set",exclude:[t.type]}})],1)]:t._e()],2),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("small",{staticClass:"help-block"},[this._v("Use the insert button ("),e("i",{staticClass:"fa fa-chevron-left"}),this._v(") to break a range into multiple ranges. Use the delete button ("),e("i",{staticClass:"fa fa-times"}),this._v(") to remove a range. Use the label box to create an different label for the range.")])}]}},oUie:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("selectize",{attrs:{all:t.allExceptExcluded,selected:t.selected,label:t.label},on:{"update:selected":[function(e){t.selected=e},t.select]}})},staticRenderFns:[]}},"r/2Y":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{allExceptExcluded:function(){var t=this;return this.options.filter(function(e){return t.exclude.indexOf(e.value)<0})}},data:function(){return{options:[{name:"Age",value:"age"},{name:"Ethnicity",value:"ethnicity"},{name:"Gender",value:"gender"},{name:"Services Provided",value:"services"},{name:"Victim Types",value:"victimTypes",nameField:"description"}]}},methods:{select:function(t){void 0===t&&(t=this.selected),this.$emit("update:selected",t)}},props:{exclude:{type:Array,default:function(){return[]}},label:String,selected:Array|String}}}});