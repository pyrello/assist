webpackJsonp([57],{"8XZL":function(t,e,n){"use strict";var i=n("Zx67"),s=n.n(i),a=n("Zrlr"),r=n.n(a),o=n("zwoO"),c=n.n(o),u=n("Pf15"),l=n.n(u),h=function(){return{id:null,first_name:null,last_name:null,birth_date:null,gender:null,ethnicity_ids:[],eye_color:null,hair_color:null,hair_length:null,height:null,weight:null,identifying_features:null,vehicle:null}},d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(this,e),c()(this,(e.__proto__||s()(e)).call(this,h(),t))}return l()(e,t),e}(n("TFAV").a);e.a=d},FSJl:function(t,e,n){var i=n("VU/8")(n("wukA"),n("jAUx"),!1,null,null,null);t.exports=i.exports},P7Jg:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("8XZL"),r=n("UmUL");e.a=s()({},new r.a({name:"abuser",storeName:"abusers",model:a.a}))},UmUL:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("bOdI"),r=n.n(a),o=n("Zrlr"),c=n.n(o),u=n("NYxO"),l=n("OQde"),h=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},d=n("TFAV");e.a=function t(e){var n,i,a,o,m=e.name,f=e.storeName,_=e.model,p=void 0===_?d.a:_;c()(this,t),this.modelMixinOptions={name:m,storeName:f,model:p};var b=this;this.data=function(){var t;return t={},r()(t,b.modelMixinOptions.name,new b.modelMixinOptions.model),r()(t,"params",r()({},b.modelMixinOptions.name+"_id",null)),t},this.computed=s()({},Object(u.c)(f,(n={},r()(n,m+"ById","byId"),r()(n,"route"+h(m),"byRoute"),r()(n,"fetching"+h(m),"fetching"),n)),(i={},r()(i,"routeHas"+h(m)+"Model",function(){return this.$route.params&&this.$route.params[m+"_id"]||!1}),r()(i,m+"Data",function(){return this["fetching"+h(m)],this["routeHas"+h(m)+"Model"]?this["route"+h(m)]:this[m+"ById"](this.params[m+"_id"])}),i)),this.created=function(){this["set"+h(m)+"Id"]()},this.watch=(a={},r()(a,m+"Data",{deep:!0,handler:function(){this["reset"+b.modelMixinOptions.name](),this[b.modelMixinOptions.name+"Data"]&&this[""+b.modelMixinOptions.name].assign(this[b.modelMixinOptions.name+"Data"])}}),r()(a,"$route.params."+m+"_id",function(){this["set"+h(m)+"Id"]()}),r()(a,"params."+m+"_id",function(t){null!==t&&this["fetchCurrent"+h(m)]()}),a),this.methods=s()({},Object(u.b)(f,r()({},"fetch"+h(m)+"Data","fetch")),(o={},r()(o,"set"+h(m)+"Id",function(t){t=t?Number(t):this.$route.params[m+"_id"]?Number(this.$route.params[m+"_id"]):null,Vue.set(this.params,m+"_id",t)}),r()(o,m+"IdExists",function(){return Object(l.f)(this.params[m+"_id"])&&null!==this.params[m+"_id"]}),r()(o,"fetch"+h(m),function(t){var e=this;this["fetch"+h(m)+"Data"](t).then(function(t){return e[m+"Fetched"](t),t}).catch(function(t){console.error(t)})}),r()(o,"fetchRoute"+h(m),function(){var t=this,e=Number(this.$route.params[m+"_id"]);return!!e&&this["fetch"+h(m)+"Data"]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+h(m)+"Fetched"](),t["current"+h(m)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(o,"fetchCurrent"+h(m),function(){var t=this,e=Number(this.params[m+"_id"]);return!!e&&this["fetch"+h(m)+"Data"]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+h(m)+"Fetched"](),t["current"+h(m)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(o,"current"+h(m)+"Fetched",function(){}),r()(o,"route"+h(m)+"Fetched",function(){}),r()(o,m+"Fetched",function(){}),r()(o,"reset",function(){this.resetData()}),r()(o,"resetData",function(){this["reset"+m](),this.params[m+"_id"]=null}),r()(o,"reset"+m,function(){this[m]=new p}),o))}},jAUx:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("grid",{attrs:{fields:t.fields,data:t.all,fetching:t.fetching,meta:t.meta,initialSortKey:"last_name"},scopedSlots:t._u([{key:"relationship",fn:function(e){return[e.item.relationship?[n("router-link",{attrs:{to:"/clients/"+e.item.client_id+"/abuse/"+e.item.id}},[t._v(t._s(e.item.relationship))])]:[t._v("'-'")]]}},{key:"first_name",fn:function(e){return[null===e.item.client?[n("em",[t._v("Client deleted")])]:e.item.client&&e.item.client.first_name?[n("router-link",{attrs:{to:"/clients/"+e.item.client.id}},[t._v(t._s(e.item.client.first_name))])]:[t._v("-")]]}},{key:"last_name",fn:function(e){return[e.item.client&&e.item.client.last_name?[n("router-link",{attrs:{to:"/clients/"+e.item.client.id}},[t._v(t._s(e.item.client.last_name))])]:[t._v("-")]]}},{key:"actions",fn:function(e){return[n("div",{staticClass:"table-button-container"},[e.item.client&&e.item.client.id?n("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+e.item.client.id+"/abuse/"+e.item.id+"/edit"}},[n("i",{staticClass:"fas fa-edit"}),t._v(" Edit")]):t._e(),t._v(" "),t.authUser.is_admin?n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(n){t.confirmDelete(e.item.id)}}},[n("i",{staticClass:"fas fa-user-times"}),t._v(" Remove")]):t._e(),t._v("  \n            ")],1)]}}])})],1)},staticRenderFns:[]}},wukA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("P7Jg");e.default={name:"abuser-client-index",mixins:[r.a],data:function(){return{fields:["relationship",{name:"first_name",title:"First Name"},{name:"last_name",title:"Last Name"},{name:"actions",titleClass:"fit-content",dataClass:"fit-content",sortable:!1}]}},computed:s()({},Object(a.c)("abuseRelationships",{byId:"byId",all:"paginated",fetching:"fetching",meta:"meta"})),created:function(){this.init()},watch:{$route:"init"},methods:s()({},Object(a.b)("abuseRelationships",{fetch:"fetch",removeRelationship:"destroy"}),{confirmDelete:function(t){var e=this,n=this.byId(t).full_name;confirm("Are you sure that you want to remove the abuse relationship between, "+n+" and "+this.client.full_name+"? If this abuser is not not attached to any other clients, their record will be deleted.")&&this.removeRelationship({id:t}).then(function(){e.addMessage("This abuse relationship has been removed"),e.$router.push("/clients/"+e.client.id+"/abuse")})},init:function(){var t={params:s()({},this.$route.params)};this.fetch(t)}})}}});