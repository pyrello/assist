webpackJsonp([42],{"9OIq":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("jtR9"),r=i("UmUL");e.a=a()({},new r.a({name:"incident",storeName:"incidents",model:s.a}))},IbYd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),s=i("NYxO"),r=i("fQ0y"),c=i("9OIq");e.default={name:"client-activities",mixins:[r.a,c.a],data:function(){return{activity_ids:[],fields:[{name:"select",dataClass:"fit-content",title:"",sortable:!1},{name:"service.name",title:"Service"},{name:"started_at",title:"When"},{name:"advocate.full_name",template:"{{ advocate.first_name }} {{ advocate.last_name }}",title:"Advocate"},{name:"actions",dataClass:"fit-content",titleClass:"fit-content",sortable:!1}]}},computed:a()({},Object(s.c)("activities",{byId:"byId",fetching:"fetching",activities:"paginated",meta:"meta"}),Object(s.c)("services",{serviceById:"byId"}),Object(s.c)("serviceNotProvidedReasons",{serviceNotProvidedReasons:"byId"})),created:function(){this.init(this.$route.query)},beforeRouteUpdate:function(t,e,i){this.init(t.query),i()},watch:{$route:function(){this.init(this.$route.query)}},methods:a()({},Object(s.b)("activities",["fetch","destroy"]),{confirmDelete:function(t){var e=this,i=confirm("Are you sure that you want to delete this activity?"),n=this.client.id;i&&this.destroy({client_id:n,id:t}).then(function(){e.addMessage("The activities for "+e.client.full_name+" has been deleted.")})},init:function(t){var e={params:{client_id:this.$route.params.client_id,page:t&&t.page||1}};this.fetch(e)},whyServiceNotProvided:function(t){return this.whyServiceNotProvidedById(t)||null}})}},UmUL:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("bOdI"),r=i.n(s),c=i("Zrlr"),o=i.n(c),d=i("NYxO"),u=i("OQde"),l=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},f=i("TFAV");e.a=function t(e){var i,n,s,c,h=e.name,m=e.storeName,v=e.model,_=void 0===v?f.a:v;o()(this,t),this.modelMixinOptions={name:h,storeName:m,model:_};var p=this;this.data=function(){var t;return t={},r()(t,p.modelMixinOptions.name,new p.modelMixinOptions.model),r()(t,"params",r()({},p.modelMixinOptions.name+"_id",null)),t},this.computed=a()({},Object(d.c)(m,(i={},r()(i,h+"ById","byId"),r()(i,"route"+l(h),"byRoute"),r()(i,"fetching"+l(h),"fetching"),i)),(n={},r()(n,"routeHas"+l(h)+"Model",function(){return this.$route.params&&this.$route.params[h+"_id"]||!1}),r()(n,h+"Data",function(){return this["fetching"+l(h)],this["routeHas"+l(h)+"Model"]?this["route"+l(h)]:this[h+"ById"](this.params[h+"_id"])}),n)),this.created=function(){this["set"+l(h)+"Id"]()},this.watch=(s={},r()(s,h+"Data",{deep:!0,handler:function(){this["reset"+p.modelMixinOptions.name](),this[p.modelMixinOptions.name+"Data"]&&this[""+p.modelMixinOptions.name].assign(this[p.modelMixinOptions.name+"Data"])}}),r()(s,"$route.params."+h+"_id",function(){this["set"+l(h)+"Id"]()}),r()(s,"params."+h+"_id",function(t){null!==t&&this["fetchCurrent"+l(h)]()}),s),this.methods=a()({},Object(d.b)(m,r()({},"fetch"+l(h)+"Data","fetch")),(c={},r()(c,"set"+l(h)+"Id",function(t){t=t?Number(t):this.$route.params[h+"_id"]?Number(this.$route.params[h+"_id"]):null,Vue.set(this.params,h+"_id",t)}),r()(c,h+"IdExists",function(){return Object(u.f)(this.params[h+"_id"])&&null!==this.params[h+"_id"]}),r()(c,"fetch"+l(h),function(t){var e=this;this["fetch"+l(h)+"Data"](t).then(function(t){return e[h+"Fetched"](t),t}).catch(function(t){console.error(t)})}),r()(c,"fetchRoute"+l(h),function(){var t=this,e=Number(this.$route.params[h+"_id"]);return!!e&&this["fetch"+l(h)+"Data"]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+l(h)+"Fetched"](),t["current"+l(h)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(c,"fetchCurrent"+l(h),function(){var t=this,e=Number(this.params[h+"_id"]);return!!e&&this["fetch"+l(h)+"Data"]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+l(h)+"Fetched"](),t["current"+l(h)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(c,"current"+l(h)+"Fetched",function(){}),r()(c,"route"+l(h)+"Fetched",function(){}),r()(c,h+"Fetched",function(){}),r()(c,"reset",function(){this.resetData()}),r()(c,"resetData",function(){this["reset"+h](),this.params[h+"_id"]=null}),r()(c,"reset"+h,function(){this[h]=new _}),c))}},f3j5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.fetching?i("div",{staticClass:"lead"},[i("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" Loading data\n    ")]):!t.fetching&&t.activities.length?i("div",[i("grid",{attrs:{fields:t.fields,data:t.activities,fetching:t.fetching,meta:t.meta},scopedSlots:t._u([{key:"select",fn:function(e){return[e.item.service_provided?i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity_ids,expression:"activity_ids"}],attrs:{type:"checkbox"},domProps:{value:e.item.id,checked:Array.isArray(t.activity_ids)?t._i(t.activity_ids,e.item.id)>-1:t.activity_ids},on:{change:function(i){var n=t.activity_ids,a=i.target,s=!!a.checked;if(Array.isArray(n)){var r=e.item.id,c=t._i(n,r);a.checked?c<0&&(t.activity_ids=n.concat([r])):c>-1&&(t.activity_ids=n.slice(0,c).concat(n.slice(c+1)))}else t.activity_ids=s}}}):t._e()]}},{key:"service.name",fn:function(e){return[t.client?i("router-link",{attrs:{to:"activities/"+e.item.id}},[t._v(t._s(e.item.service.name))]):t._e()]}},{key:"started_at",fn:function(e){return[e.item.service_provided?[t._v("\n                    "+t._s(t._f("prettyDatetime")(e.item.started_at))+"\n                ")]:t.serviceNotProvidedReasons(e.item.why_not_provided)?[t._v("Not provided: "+t._s(t.serviceNotProvidedReasons(e.item.why_not_provided).name))]:t._e()]}},{key:"actions",fn:function(e){return[i("div",{staticClass:"table-button-container"},[i("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+t.client.id+"/activities/"+e.item.id+"/edit"}},[i("i",{staticClass:"fa fa-edit"}),t._v(" Edit")]),t._v(" "),t.authUser.is_admin?i("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(i){t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"fa fa-remove"}),t._v(" Delete")]):t._e(),t._v("  \n                ")],1)]}}])}),t._v(" "),t.activity_ids.length?i("router-link",{staticClass:"btn btn-primary",attrs:{to:"outcomes/add?activity_ids="+t.activity_ids.join(",")}},[t._v("Add outcome")]):t._e(),t._v(" "),i("small",{staticClass:"help-block"},[t._v("Select one or more activities to assign an outcome.")])],1):i("div",{staticClass:"lead"},[i("p",[t._v("There are no activities for this client.")]),t._v(" "),i("p",[i("router-link",{staticClass:"btn btn-lg btn-primary",attrs:{to:"activities/add"}},[t._v("Add Activity")])],1),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"fa fa-info-circle"}),this._v(" Activities are interactions between the client and staff. Once activities are entered you can associate one or more of them with an outcome.")])}]}},fQ0y:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("b+22"),r=i("UmUL");e.a=a()({},new r.a({name:"client",storeName:"clients",model:s.a}))},jtR9:function(t,e,i){"use strict";var n=i("Zx67"),a=i.n(n),s=i("Zrlr"),r=i.n(s),c=i("zwoO"),o=i.n(c),d=i("Pf15"),u=i.n(d),l=i("OQde"),f=i("vXSK"),h=i("TFAV"),m=(i("0aVa"),function(){return{date:Object(l.h)(f.a),client_id:null,advocate_id:null,incident_type_id:null,state:"",city:"",note:""}}),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(this,e),o()(this,(e.__proto__||a()(e)).call(this,m(),t))}return u()(e,t),e}(h.a);e.a=v},qzuZ:function(t,e,i){var n=i("VU/8")(i("IbYd"),i("f3j5"),!1,null,null,null);t.exports=n.exports},vXSK:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var n=i("Dd8w"),a=(i.n(n),i("OQde"),"YYYY-MM-DD"),s=function(){return{first_name:"",last_name:"",email:"",password:"",password_confirmation:""}}}});