webpackJsonp([42],{"9OIq":function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("jtR9"),r=i("UmUL");e.a=a()({},new r.a({name:"incident",storeName:"incidents",model:s.a}))},IbYd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),s=i("NYxO"),r=i("fQ0y"),c=i("9OIq");e.default={name:"client-activities",mixins:[r.a,c.a],data:function(){return{activity_ids:[],fields:[{name:"select",dataClass:"fit-content",title:"",sortable:!1},{name:"service.name",title:"Service"},{name:"started_at",title:"When"},{name:"advocate.full_name",template:"{{ advocate.first_name }} {{ advocate.last_name }}",title:"Advocate"},{name:"actions",dataClass:"fit-content",titleClass:"fit-content",sortable:!1}]}},computed:a()({},Object(s.c)("activities",{byId:"byId",fetching:"fetching",activities:"paginated",meta:"meta"}),Object(s.c)("services",{serviceById:"byId"}),Object(s.c)("serviceNotProvidedReasons",{serviceNotProvidedReasons:"byId"})),created:function(){this.init(this.$route.query)},beforeRouteUpdate:function(t,e,i){this.init(t.query),i()},watch:{$route:function(){this.init(this.$route.query)}},methods:a()({},Object(s.b)("activities",["fetch","destroy"]),{confirmDelete:function(t){var e=this,i=confirm("Are you sure that you want to delete this activity?"),n=this.client.id;i&&this.destroy({client_id:n,id:t}).then(function(){e.addMessage("The activities for "+e.client.full_name+" has been deleted.")})},init:function(t){var e={params:{client_id:this.$route.params.client_id,page:t&&t.page||1}};this.fetch(e)},whyServiceNotProvided:function(t){return this.whyServiceNotProvidedById(t)||null}})}},UmUL:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("bOdI"),r=i.n(s),c=i("Zrlr"),o=i.n(c),d=i("NYxO"),u=i("OQde"),l=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},f=i("TFAV");e.a=function t(e){var i,n,s,c=e.name,v=e.storeName,m=e.model,h=void 0===m?f.a:m;o()(this,t),this.modelMixinOptions={name:c,storeName:v,model:h};var _=this;this.data=function(){var t;return t={},r()(t,_.modelMixinOptions.name,new _.modelMixinOptions.model),r()(t,"params",r()({},_.modelMixinOptions.name+"_id",null)),t},this.computed=a()({},Object(d.c)(v,(i={},r()(i,c+"ById","byId"),r()(i,"route"+l(c),"byRoute"),r()(i,"fetching"+l(c),"fetching"),i)),r()({},c+"Data",function(){return this["fetching"+l(c)],this["route"+l(c)]})),this.created=function(){this["set"+l(c)+"Id"]()},this.watch=(n={},r()(n,c+"Data",function(){this["reset"+_.modelMixinOptions.name](),this[_.modelMixinOptions.name+"Data"]&&this[""+_.modelMixinOptions.name].assign(this[_.modelMixinOptions.name+"Data"])}),r()(n,"this.$route.params."+c+"_id",function(){this["set"+l(c)+"Id"]()}),n),this.methods=a()({},Object(d.b)(v,r()({},"fetch"+l(c),"fetch")),(s={},r()(s,"set"+l(c)+"Id",function(t){t=t?Number(t):this.$route.params[c+"_id"]?Number(this.$route.params[c+"_id"]):null,Vue.set(this.params,c+"_id",t)}),r()(s,c+"IdExists",function(){return Object(u.f)(this.params[c+"_id"])&&null!==this.params[c+"_id"]}),r()(s,"fetchRoute"+l(c),function(){var t=this,e=Number(this.$route.params[c+"_id"]);return!!e&&this["fetch"+l(c)]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+l(c)+"Fetched"](),t["current"+l(c)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(s,"fetchCurrent"+l(c),function(){return this["fetchRoute"+l(c)]()}),r()(s,"current"+l(c)+"Fetched",function(){}),r()(s,"route"+l(c)+"Fetched",function(){}),r()(s,c+"Fetched",function(){}),r()(s,"reset",function(){this.resetData()}),r()(s,"resetData",function(){this["reset"+c](),this.params[c+"_id"]=null}),r()(s,"reset"+c,function(){this[c]=new h}),s))}},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var n,a=i("C4MV"),s=(n=a)&&n.__esModule?n:{default:n};e.default=function(t,e,i){return e in t?(0,s.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},f3j5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.fetching?i("div",{staticClass:"lead"},[i("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" Loading data\n    ")]):!t.fetching&&t.activities.length?i("div",[i("grid",{attrs:{fields:t.fields,data:t.activities,fetching:t.fetching,meta:t.meta},scopedSlots:t._u([{key:"select",fn:function(e){return[e.item.service_provided?i("input",{directives:[{name:"model",rawName:"v-model",value:t.activity_ids,expression:"activity_ids"}],attrs:{type:"checkbox"},domProps:{value:e.item.id,checked:Array.isArray(t.activity_ids)?t._i(t.activity_ids,e.item.id)>-1:t.activity_ids},on:{change:function(i){var n=t.activity_ids,a=i.target,s=!!a.checked;if(Array.isArray(n)){var r=e.item.id,c=t._i(n,r);a.checked?c<0&&(t.activity_ids=n.concat([r])):c>-1&&(t.activity_ids=n.slice(0,c).concat(n.slice(c+1)))}else t.activity_ids=s}}}):t._e()]}},{key:"service.name",fn:function(e){return[t.client?i("router-link",{attrs:{to:"activities/"+e.item.id}},[t._v(t._s(e.item.service.name))]):t._e()]}},{key:"started_at",fn:function(e){return[e.item.service_provided?[t._v("\n                    "+t._s(t._f("prettyDatetime")(e.item.started_at))+"\n                ")]:t.serviceNotProvidedReasons(e.item.why_not_provided)?[t._v("Not provided: "+t._s(t.serviceNotProvidedReasons(e.item.why_not_provided).name))]:t._e()]}},{key:"actions",fn:function(e){return[i("div",{staticClass:"table-button-container"},[i("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+t.client.id+"/activities/"+e.item.id+"/edit"}},[i("i",{staticClass:"fa fa-edit"}),t._v(" Edit")]),t._v(" "),t.authUser.is_admin?i("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(i){t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"fa fa-remove"}),t._v(" Delete")]):t._e(),t._v("  \n                ")],1)]}}])}),t._v(" "),t.activity_ids.length?i("router-link",{staticClass:"btn btn-primary",attrs:{to:"outcomes/add?activity_ids="+t.activity_ids.join(",")}},[t._v("Add outcome")]):t._e(),t._v(" "),i("small",{staticClass:"help-block"},[t._v("Select one or more activities to assign an outcome.")])],1):i("div",{staticClass:"lead"},[i("p",[t._v("There are no activities for this client.")]),t._v(" "),i("p",[i("router-link",{staticClass:"btn btn-lg btn-primary",attrs:{to:"activities/add"}},[t._v("Add Activity")])],1),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",{staticClass:"fa fa-info-circle"}),this._v(" Activities are interactions between the client and staff. Once activities are entered you can associate one or more of them with an outcome.")])}]}},fQ0y:function(t,e,i){"use strict";var n=i("Dd8w"),a=i.n(n),s=i("b+22"),r=i("UmUL");e.a=a()({},new r.a({name:"client",storeName:"clients",model:s.a}))},jtR9:function(t,e,i){"use strict";var n=i("Zx67"),a=i.n(n),s=i("Zrlr"),r=i.n(s),c=i("zwoO"),o=i.n(c),d=i("Pf15"),u=i.n(d),l=i("OQde"),f=i("vXSK"),v=i("TFAV"),m=(i("0aVa"),function(){return{date:Object(l.h)(f.a),client_id:null,advocate_id:null,incident_type_id:null,state:null,city:null,note:""}}),h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(this,e),o()(this,(e.__proto__||a()(e)).call(this,m(),t))}return u()(e,t),e}(v.a);e.a=h},qzuZ:function(t,e,i){var n=i("VU/8")(i("IbYd"),i("f3j5"),!1,null,null,null);t.exports=n.exports},vXSK:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var n=i("Dd8w"),a=(i.n(n),i("OQde"),"YYYY-MM-DD"),s=function(){return{first_name:"",last_name:"",email:"",password:"",password_confirmation:""}}}});