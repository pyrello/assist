webpackJsonp([61],{Qkpx:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.fetching?n("div",{staticClass:"lead"},[n("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" Loading data\n    ")]):n("div",[n("grid",{attrs:{fields:t.fields,data:t.notes,fetching:t.fetching},scopedSlots:t._u([{key:"content",fn:function(e){return[n("router-link",{attrs:{to:"/clients/"+t.client.id+"/notes/"+e.item.id}},[t._v(t._s(t._f("truncate")(e.item.content,"50")))])]}},{key:"type",fn:function(e){return[e.item.type?[t.client?n("router-link",{attrs:{to:"/"+e.item.path_fragment+"/"+e.item.noteable_id}},[t._v(t._s(e.item.type))]):t._e()]:[t._v(" - ")]]}},{key:"created_at",fn:function(e){return[t._v("\n                "+t._s(t._f("prettyDatetime")(e.item.created_at))+"\n            ")]}},{key:"actions",fn:function(e){return[n("div",{staticClass:"table-button-container"},[t.client?n("router-link",{staticClass:"btn btn-warning btn-xs",attrs:{to:"/clients/"+t.client.id+"/notes/"+e.item.id+"/edit"}},[n("i",{staticClass:"fas fa-edit fa-fw"}),n("span",{staticClass:"hidden-xs"},[t._v(" Edit")])]):t._e(),t._v(" "),t.authUser.is_admin?n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(n){t.confirmDelete(e.item.id)}}},[n("i",{staticClass:"fas fa-trash-alt fa-fw"}),n("span",{staticClass:"hidden-xs"},[t._v(" Delete")])]):t._e(),t._v("  \n                ")],1)]}}])})],1)])},staticRenderFns:[]}},UmUL:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("bOdI"),r=n.n(a),o=n("Zrlr"),c=n.n(o),u=n("NYxO"),d=n("OQde"),f=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},l=n("TFAV");e.a=function t(e){var n,i,a,o=e.name,h=e.storeName,m=e.model,p=void 0===m?l.a:m;c()(this,t),this.modelMixinOptions={name:o,storeName:h,model:p};var _=this;this.data=function(){var t;return t={},r()(t,_.modelMixinOptions.name,new _.modelMixinOptions.model),r()(t,"params",r()({},_.modelMixinOptions.name+"_id",null)),t},this.computed=s()({},Object(u.c)(h,(n={},r()(n,o+"ById","byId"),r()(n,"route"+f(o),"byRoute"),r()(n,"fetching"+f(o),"fetching"),n)),r()({},o+"Data",function(){return this["fetching"+f(o)],this["route"+f(o)]})),this.created=function(){this["set"+f(o)+"Id"]()},this.watch=(i={},r()(i,o+"Data",function(){this["reset"+_.modelMixinOptions.name](),this[_.modelMixinOptions.name+"Data"]&&this[""+_.modelMixinOptions.name].assign(this[_.modelMixinOptions.name+"Data"])}),r()(i,"this.$route.params."+o+"_id",function(){this["set"+f(o)+"Id"]()}),i),this.methods=s()({},Object(u.b)(h,r()({},"fetch"+f(o),"fetch")),(a={},r()(a,"set"+f(o)+"Id",function(t){t=t?Number(t):this.$route.params[o+"_id"]?Number(this.$route.params[o+"_id"]):null,Vue.set(this.params,o+"_id",t)}),r()(a,o+"IdExists",function(){return Object(d.f)(this.params[o+"_id"])&&null!==this.params[o+"_id"]}),r()(a,"fetchRoute"+f(o),function(){var t=this,e=Number(this.$route.params[o+"_id"]);return!!e&&this["fetch"+f(o)]({id:e,fetchId:"id:"+e}).then(function(e){return t["route"+f(o)+"Fetched"](),t["current"+f(o)+"Fetched"](),e}).catch(function(t){console.error(t)})}),r()(a,"fetchCurrent"+f(o),function(){return this["fetchRoute"+f(o)]()}),r()(a,"current"+f(o)+"Fetched",function(){}),r()(a,"route"+f(o)+"Fetched",function(){}),r()(a,o+"Fetched",function(){}),r()(a,"reset",function(){this.resetData()}),r()(a,"resetData",function(){this["reset"+o](),this.params[o+"_id"]=null}),r()(a,"reset"+o,function(){this[o]=new p}),a))}},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var i,s=n("C4MV"),a=(i=s)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},fQ0y:function(t,e,n){"use strict";var i=n("Dd8w"),s=n.n(i),a=n("b+22"),r=n("UmUL");e.a=s()({},new r.a({name:"client",storeName:"clients",model:a.a}))},lPOX:function(t,e,n){var i=n("VU/8")(n("tufP"),n("Qkpx"),!1,null,null,null);t.exports=i.exports},tufP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),a=n("NYxO"),r=n("fQ0y");e.default={name:"client-notes",mixins:[r.a],data:function(){return{fields:[{name:"content",title:"Note"},{name:"created_at",title:"Date"},{name:"type",title:"Attached to"},{name:"actions",dataClass:"fit-content",titleClass:"fit-content",sortable:!1}]}},computed:s()({},Object(a.c)("notes",{byId:"byId",fetching:"fetching",notes:"paginated",meta:"meta"})),created:function(){this.init(this.$route.query)},watch:{$route:function(){this.init(this.$route.query)}},methods:s()({},Object(a.b)("notes",["destroy","fetch"]),{confirmDelete:function(t){var e=this;confirm("Are you sure that you want to delete this note?")&&this.destroy({id:t}).then(function(){e.addMessage("Note has been deleted.")})},init:function(t){this.fetchCurrentClient();var e={params:{client_id:this.params.client_id,page:t&&t.page||1}};this.fetch(e)}})}}});